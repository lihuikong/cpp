int countOnes(unsigned int n)
{
    // 1. 每 2 位为一组，统计其中 1 的个数
    // 0x55555555 = 01010101... (把 32 个 1 位计数器合并成 16 个 2 位计数器)
    n = (n & 0x55555555) + ((n >> 1) & 0x55555555);

    // 2. 每 4 位为一组，统计其中 1 的个数
    // 0x33333333 = 00110011... (把 16 个 2 位计数器合并成 8 个 4 位计数器)
    n = (n & 0x33333333) + ((n >> 2) & 0x33333333);

    // 3. 每 8 位为一组，统计其中 1 的个数
    // 0x0F0F0F0F = 00001111... (把 8 个 4 位计数器合并成 4 个 8 位计数器)
    n = (n & 0x0F0F0F0F) + ((n >> 4) & 0x0F0F0F0F);

    // 4. 每 16 位为一组，统计其中 1 的个数
    // 0x00FF00FF (把 4 个 8 位计数器合并成 2 个 16 位计数器)
    n = (n & 0x00FF00FF) + ((n >> 8) & 0x00FF00FF);

    // 5. 每 32 位为一组，得出最终总数
    // 0x0000FFFF (把 2 个 16 位计数器合并成 1 个 32 位计数器)
    n = (n & 0x0000FFFF) + ((n >> 16) & 0x0000FFFF);

    return (int)n;
}